{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport fetch from 'isomorphic-unfetch';\nimport Head from 'next/head';\nimport HomePage from '../components/HomePage';\nimport Page from '../components/Page';\nimport ForceLayout from '../components/ForceLayout'; // import P5Wrapper from 'react-p5-wrapper';\n// import sketch from '../components/sketch';\n\nfunction Home({\n  searchesMapped\n}) {\n  return __jsx(\"div\", null, __jsx(Head, null, __jsx(\"title\", null, \"My page title\"), __jsx(\"script\", {\n    src: \"https://d3js.org/d3.v3.min.js\"\n  })), __jsx(\"div\", null, __jsx(ForceLayout, null)));\n}\n\nexport async function getServerSideProps() {\n  try {\n    const dev = false;\n    const server = dev ? 'http://localhost:3001' : 'https://popular.now.sh';\n    const res = await fetch(`${server}/api/trends`);\n    const json = await res.json();\n    const searches = json.default.trendingSearchesDays[0].trendingSearches;\n    const searchesMapped = searches.map(el => {\n      console.log(el);\n      const search = {};\n      search.title = el.title.query;\n      search.children = [];\n      el.articles ? el.articles.map(el => {\n        let title = {};\n        title = el.title.split(' ')[1];\n        search.children.push({\n          title\n        });\n      }) : null; // search.traffic = el.formattedTraffic\n\n      return search;\n    });\n    return {\n      props: {\n        searchesMapped\n      }\n    };\n  } catch (err) {\n    console.log(err);\n  }\n}\nexport default Home;","map":null,"metadata":{},"sourceType":"module"}