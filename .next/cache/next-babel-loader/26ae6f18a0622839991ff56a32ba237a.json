{"ast":null,"code":"var _jsxFileName = \"/Users/ar/projects/popular/components/Page.jsx\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState, useRef } from 'react';\nimport dynamic from 'next/dynamic';\nimport { select, hierarchy, tree, linkVertical, forceSimulation } from \"d3\";\nimport json from './lang';\n\nvar Page = function Page(props) {\n  // let [data, setData] = useState();\n  var svgRef = useRef();\n  var title = null;\n  console.log(\"json\", json);\n  useEffect(function () {\n    var svg = select(svgRef.current); // const data = props.props.map(e => {\n    // \tconst title = []\n    // \tconst traffic = []\n    // \ttitle.push(e.title)\n    // \ttraffic.push(parseInt(e.traffic.match(/\\d+/)[0]))\n    // \treturn title, traffic\n    // });\n    // const root = hierarchy(props.props[0])\n\n    var root = hierarchy(json);\n    var treeLayout = tree().size([1700, 600]);\n    treeLayout(root);\n    var linkGenerator = linkVertical().x(function (node) {\n      return node.x;\n    }).y(function (node) {\n      return node.y + 100;\n    });\n    svg.selectAll(\".node\").data(root.descendants()).join(\"circle\").attr(\"class\", \"node\").attr(\"r\", 5).attr(\"fill\", \"grey\").attr(\"cx\", function (node) {\n      return node.x;\n    }).attr(\"cy\", function (node) {\n      return node.y + 100;\n    });\n    svg.selectAll(\".link\").data(root.links()).join(\"path\").attr(\"class\", \"link\").attr(\"fill\", \"none\").attr(\"stroke\", \"grey\").attr(\"d\", linkGenerator);\n    svg.selectAll(\".label\").data(root.descendants()).join(\"text\").attr(\"class\", \"label\").attr(\"fill\", \"black\").text(function (node) {\n      return node.data.language;\n    }).attr(\"font-size\", 16).attr(\"text-anchor\", \"middle\").attr(\"x\", function (node) {\n      return node.x;\n    }).attr(\"y\", function (node) {\n      return node.y + 85;\n    });\n  }, []);\n  return __jsx(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, __jsx(\"svg\", {\n    ref: svgRef,\n    width: \"2000px\",\n    height: \"2000px\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }), __jsx(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }), __jsx(\"button\", {\n    onClick: function onClick() {\n      return setData(data.map(function (value) {\n        return value + 5;\n      }));\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, \"Update\"));\n};\n\nexport default Page;","map":{"version":3,"sources":["/Users/ar/projects/popular/components/Page.jsx"],"names":["React","useEffect","useState","useRef","dynamic","select","hierarchy","tree","linkVertical","forceSimulation","json","Page","props","svgRef","title","console","log","svg","current","root","treeLayout","size","linkGenerator","x","node","y","selectAll","data","descendants","join","attr","links","text","language","setData","map","value"],"mappings":"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","sourcesContent":["import React, {useEffect, useState, useRef} from 'react'\nimport dynamic from 'next/dynamic'\nimport { select, hierarchy, tree, linkVertical, forceSimulation } from \"d3\"\nimport json from './lang'\n\nconst Page = (props) => {\n\t// let [data, setData] = useState();\n\tconst svgRef = useRef();\n\tlet title = null\n\tconsole.log(\"json\", json)\n\n\tuseEffect(() => {\n\t\tconst svg = select(svgRef.current);\n\t\t// const data = props.props.map(e => {\n\t\t// \tconst title = []\n\t\t// \tconst traffic = []\n\t\t// \ttitle.push(e.title)\n\t\t// \ttraffic.push(parseInt(e.traffic.match(/\\d+/)[0]))\n\t\t// \treturn title, traffic\n\t\t// });\n\n\t\t// const root = hierarchy(props.props[0])\n\t\tconst root = hierarchy(json)\n\t\tconst treeLayout = tree().size([1700, 600])\n\t\ttreeLayout(root)\n\n\n\t\tconst linkGenerator = linkVertical()\n\t\t.x(node => node.x)\n\t\t.y(node => node.y + 100)\n\n\t\tsvg\n\t\t.selectAll(\".node\")\n\t\t.data(root.descendants())\n\t\t.join(\"circle\")\n\t\t.attr(\"class\", \"node\")\n\t\t.attr(\"r\", 5)\n\t\t.attr(\"fill\", \"grey\")\n\t\t.attr(\"cx\", node => node.x)\n\t\t.attr(\"cy\", node => node.y + 100)\n\n\t\tsvg\n\t\t.selectAll(\".link\").data(root.links())\n\t\t.join(\"path\").attr(\"class\",\"link\")\n\t\t.attr(\"fill\", \"none\")\n\t\t.attr(\"stroke\", \"grey\")\n\t\t.attr(\"d\", linkGenerator)\n\n\t\tsvg\n\t\t.selectAll(\".label\")\n\t\t.data(root.descendants())\n\t\t.join(\"text\")\n\t\t.attr(\"class\", \"label\")\n\t\t.attr(\"fill\", \"black\")\n\t\t.text(node => node.data.language)\n\t\t.attr(\"font-size\", 16)\n\t\t.attr(\"text-anchor\", \"middle\")\n\t\t.attr(\"x\", node => node.x)\n\t\t.attr(\"y\", node => node.y + 85)\n\n\t}, [])\n\nreturn (\n\t<React.Fragment>\n\t\t<svg ref={svgRef}  width='2000px' height='2000px'></svg>\n\t\t<br/>\n\t\t<button onClick={() => setData(data.map(value => value + 5))}>\n\t\tUpdate\n\t\t</button>\n\t</React.Fragment>\n )\n\n}\n\nexport default Page\n"]},"metadata":{},"sourceType":"module"}