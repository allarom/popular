{"ast":null,"code":"var _jsxFileName = \"/Users/ar/projects/popular/components/ForceLayout.jsx\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState, useRef } from 'react';\nimport dynamic from 'next/dynamic'; // import { select, hierarchy, tree, linkVertical, forceSimulation, forceCenter,  mouse,  forceX,  forceY, forceCollide, forceRadial, scaleSqrt} from \"d3\"\n// import * as d3 from 'd3'\n\nimport json from './lang';\nimport { forceManyBody, force } from 'd3-force';\nimport useResizeObserver from '../hooks/useResizeObeserver';\n\nvar Page = function Page(props) {\n  var svgRef = useRef();\n  var wrapperRef = useRef();\n  var dimensions = useResizeObserver(wrapperRef);\n  useEffect(function () {\n    if (!dimensions) return; // const svg = select(svgRef.current)\n\n    var width = dimensions.width,\n        height = dimensions.height,\n        root;\n    var force = d3.layout.force().charge(-120).gravity(.05).size([width, height]).on(\"tick\", tick); // var svg = d3.select(\"body\").append(\"svg\")\n    //     .attr(\"width\", width)\n    //     .attr(\"height\", height);\n\n    var svg = d3.select(svgRef.current);\n    var link = svg.selectAll(\".link\"),\n        node = svg.selectAll(\".node\");\n    root = json;\n    update();\n    var getRadius = d3.scale.log().domain([10000, 2600000000000]).range([5, 50]);\n    console.log(\"node\", getRadius(2000000));\n\n    function update() {\n      var nodes = flatten(root),\n          links = d3.layout.tree().links(nodes); // Restart the force layout.\n\n      var getRadius = d3.scale.log().domain([10000, 2600000000000]).range([5, 50]);\n      var dist = null;\n      var distance = node.data(nodes, function (d) {\n        dist = d.speaker;\n        return dist;\n      });\n      console.log(\"dist\", dist);\n      console.log(\"distance\", getRadius(dist));\n      force.linkDistance(getRadius(dist));\n      force.nodes(nodes).links(links).start(); // Update links.\n\n      link = link.data(links, function (d) {\n        return d.target.id;\n      });\n      link.exit().remove();\n      link.enter().insert(\"line\", \".node\").attr(\"class\", \"link\"); // Update nodes.\n\n      node = node.data(nodes, function (d) {\n        return d.id;\n      });\n      node.exit().remove();\n      var nodeEnter = node.enter().append(\"g\").attr(\"class\", \"node\").on(\"click\", click).call(force.drag);\n      var radiusScale = d3.scale.log().domain([10000, 2600000000000]).range([5, 50]);\n      nodeEnter.append(\"circle\").attr(\"r\", function (node) {\n        force.linkDistance(radiusScale(node.speaker));\n        var scale = radiusScale(node.speaker);\n        return scale;\n      });\n      nodeEnter.append(\"text\").attr(\"dy\", \"30px\").text(function (d) {\n        return d.language;\n      }); // .attr(\"y\", node => node.y + \"10px\")\n\n      node.select(\"circle\").style(\"fill\", color);\n    }\n\n    function tick() {\n      link.attr(\"x1\", function (d) {\n        return d.source.x;\n      }).attr(\"y1\", function (d) {\n        return d.source.y;\n      }).attr(\"x2\", function (d) {\n        return d.target.x;\n      }).attr(\"y2\", function (d) {\n        return d.target.y;\n      });\n      node.attr(\"transform\", function (d) {\n        return \"translate(\" + d.x + \",\" + d.y + \")\";\n      });\n    }\n\n    function color(d) {\n      return d._children ? \"#3182bd\" // collapsed package\n      : d.children ? \"#c6dbef\" // expanded package\n      : \"#fd8d3c\"; // leaf node\n    } // Toggle children on click.\n\n\n    function click(d) {\n      if (d3.event.defaultPrevented) return; // ignore drag\n\n      if (d.children) {\n        d._children = d.children;\n        d.children = null;\n      } else {\n        d.children = d._children;\n        d._children = null;\n      }\n\n      update();\n    } // Returns a list of all nodes under the root.\n\n\n    function flatten(root) {\n      var nodes = [],\n          i = 0;\n\n      function recurse(node) {\n        if (node.children) node.children.forEach(recurse);\n        if (!node.id) node.id = ++i;\n        nodes.push(node);\n      }\n\n      recurse(root);\n      return nodes;\n    } // const simulation = forceSimulation(nodeData)\n    // // force\n    // .force(\"center\", forceCenter(dimensions.width/2, dimensions.height/2))\n    // .force(\"charge\", forceManyBody().strength(-40))\n    // .force(\"collide\", forceCollide(60))\n    // .on(\"tick\", () => {\n    //   const linkGenerator = linkVertical()\n    //   .x(node => node.x)\n    //   .y(node => node.y + 100)\n    //   svg\n    //   .selectAll(\".node\")\n    //   .data(nodeData)\n    //   .join(\"circle\")\n    //   .attr(\"class\", \"node\")\n    //   .attr(\"r\", 5)\n    //   .attr(\"fill\", \"grey\")\n    //   .attr(\"cx\", node => node.x)\n    //   .attr(\"cy\", node => node.y + 100)\n    //   svg\n    //   .selectAll(\".link\")\n    //   .data(linkData)\n    //   .join(\"path\").attr(\"class\",\"link\")\n    //   .attr(\"fill\", \"none\")\n    //   .attr(\"stroke\", \"grey\")\n    //   .attr(\"d\", linkGenerator)\n    //   .attr(\"x1\", link => link.source.x)\n    //   .attr(\"y1\", link => link.source.y)\n    //   .attr(\"x2\", link => link.target.x)\n    //   .attr(\"y2\", link => link.target.y)\n    //   svg\n    //   .selectAll(\".label\")\n    //   .data(root.descendants())\n    //   .join(\"text\")\n    //   .attr(\"class\", \"label\")\n    //   .attr(\"fill\", \"black\")\n    //   .text(node => node.data.language)\n    //   .attr(\"font-size\", 16)\n    //   .attr(\"text-anchor\", \"middle\")\n    //   .attr(\"x\", node => node.x)\n    //   .attr(\"y\", node => node.y + 85)\n    // })\n    // svg.on(\"mousemove\", ()=> {\n    //   const [x,y] = mouse(svgRef.current)\n    //   simulation\n    //   .force(\"x\", forceX(x).strength(node => 0.2 + node.depth * 0.15))\n    //   .force(\"y\", forceY(y).strength(node => 0.2 + node.depth * 0.15))\n    // })\n    // svg.on(\"click\", () => {\n    //    const [x, y] = mouse(svgRef.current)\n    //    simulation\n    //    .alpha(0.5)\n    //    .restart()\n    //    .force(\"orbit\", forceRadial(100, x, y))\n    //    svg.selectAll(\".orbit\")\n    //    .data([json])\n    //    .join(\"circle\")\n    //    .attr(\"class\", \"orbit\")\n    //    .attr(\"fill\", \"none\")\n    //    .attr(\"r\", 500)\n    //    .attr(\"cx\", x)\n    //    .attr(\"cy\", y)\n    // })\n\n  }, [json, dimensions]);\n  return __jsx(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    ref: wrapperRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219\n    },\n    __self: this\n  }, __jsx(\"svg\", {\n    ref: svgRef,\n    height: \"100vh\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220\n    },\n    __self: this\n  })), __jsx(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222\n    },\n    __self: this\n  }));\n};\n\nexport default Page;","map":{"version":3,"sources":["/Users/ar/projects/popular/components/ForceLayout.jsx"],"names":["React","useEffect","useState","useRef","dynamic","json","forceManyBody","force","useResizeObserver","Page","props","svgRef","wrapperRef","dimensions","width","height","root","d3","layout","charge","gravity","size","on","tick","svg","select","current","link","selectAll","node","update","getRadius","scale","log","domain","range","console","nodes","flatten","links","tree","dist","distance","data","d","speaker","linkDistance","start","target","id","exit","remove","enter","insert","attr","nodeEnter","append","click","call","drag","radiusScale","text","language","style","color","source","x","y","_children","children","event","defaultPrevented","i","recurse","forEach","push"],"mappings":"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","sourcesContent":["import React, {useEffect, useState, useRef} from 'react'\nimport dynamic from 'next/dynamic'\n// import { select, hierarchy, tree, linkVertical, forceSimulation, forceCenter,  mouse,  forceX,  forceY, forceCollide, forceRadial, scaleSqrt} from \"d3\"\n// import * as d3 from 'd3'\nimport json from './lang'\nimport { forceManyBody, force } from 'd3-force';\nimport useResizeObserver from '../hooks/useResizeObeserver'\n\n\nconst Page = (props) => {\n  const svgRef = useRef()\n  const wrapperRef = useRef()\n  const dimensions = useResizeObserver(wrapperRef)\n\tuseEffect(() => {\n    if(!dimensions) return\n    // const svg = select(svgRef.current)\n    var width = dimensions.width,\n    height = dimensions.height,\n    root;\n\nvar force = d3.layout.force()\n    .charge(-120)\n    .gravity(.05)\n    .size([width, height])\n    .on(\"tick\", tick);\n// var svg = d3.select(\"body\").append(\"svg\")\n//     .attr(\"width\", width)\n//     .attr(\"height\", height);\nconst svg = d3.select(svgRef.current)\n\nvar link = svg.selectAll(\".link\"),\n    node = svg.selectAll(\".node\");\n\nroot = json;\nupdate();\n\n\nconst getRadius = d3.scale.log()\n  .domain([10000, 2600000000000])\n  .range([5, 50])\n\n\nconsole.log(\"node\", getRadius(2000000))\n\n\nfunction update() {\n  var nodes = flatten(root),\n      links = d3.layout.tree().links(nodes);\n  // Restart the force layout.\n\nconst getRadius = d3.scale.log()\n.domain([10000, 2600000000000])\n.range([5, 50])\nlet dist = null\nlet distance = node.data(nodes, function(d) { dist = d.speaker; return dist });\nconsole.log(\"dist\", dist)\nconsole.log(\"distance\", getRadius(dist))\nforce.linkDistance(getRadius(dist))\n\n  force\n      .nodes(nodes)\n      .links(links)\n      .start();\n\n  // Update links.\n  link = link.data(links, function(d) { return d.target.id; });\n\n  link.exit().remove();\n\n  link.enter().insert(\"line\", \".node\")\n      .attr(\"class\", \"link\");\n\n  // Update nodes.\n  node = node.data(nodes, function(d) { return d.id; });\n\n  node.exit().remove();\n\n  var nodeEnter = node.enter().append(\"g\")\n      .attr(\"class\", \"node\")\n      .on(\"click\", click)\n      .call(force.drag);\n\n let radiusScale = d3.scale.log()\n .domain([10000, 2600000000000])\n .range([5, 50]);\n\n  nodeEnter.append(\"circle\")\n      .attr(\"r\", node => {\n      force.linkDistance(radiusScale(node.speaker))\n      let scale = radiusScale(node.speaker)\n      return scale\n     }\n    );\n\n  nodeEnter.append(\"text\")\n      .attr(\"dy\", \"30px\")\n      .text(function(d) { return d.language; })\n      // .attr(\"y\", node => node.y + \"10px\")\n\n  node.select(\"circle\")\n      .style(\"fill\", color);\n}\n\nfunction tick() {\n  link.attr(\"x1\", function(d) { return d.source.x; })\n      .attr(\"y1\", function(d) { return d.source.y; })\n      .attr(\"x2\", function(d) { return d.target.x; })\n      .attr(\"y2\", function(d) { return d.target.y; });\n\n  node.attr(\"transform\", function(d) { return \"translate(\" + d.x + \",\" + d.y + \")\"; });\n}\n\nfunction color(d) {\n  return d._children ? \"#3182bd\" // collapsed package\n      : d.children ? \"#c6dbef\" // expanded package\n      : \"#fd8d3c\"; // leaf node\n}\n\n// Toggle children on click.\nfunction click(d) {\n  if (d3.event.defaultPrevented) return; // ignore drag\n  if (d.children) {\n    d._children = d.children;\n    d.children = null;\n  } else {\n    d.children = d._children;\n    d._children = null;\n  }\n  update();\n}\n\n// Returns a list of all nodes under the root.\nfunction flatten(root) {\n  var nodes = [], i = 0;\n\n  function recurse(node) {\n    if (node.children) node.children.forEach(recurse);\n    if (!node.id) node.id = ++i;\n    nodes.push(node);\n  }\n\n  recurse(root);\n  return nodes;\n}\n    \n    // const simulation = forceSimulation(nodeData)\n    // // force\n    // .force(\"center\", forceCenter(dimensions.width/2, dimensions.height/2))\n    // .force(\"charge\", forceManyBody().strength(-40))\n    // .force(\"collide\", forceCollide(60))\n    // .on(\"tick\", () => {\n    //   const linkGenerator = linkVertical()\n    //   .x(node => node.x)\n    //   .y(node => node.y + 100)\n  \n    //   svg\n    //   .selectAll(\".node\")\n    //   .data(nodeData)\n    //   .join(\"circle\")\n    //   .attr(\"class\", \"node\")\n    //   .attr(\"r\", 5)\n    //   .attr(\"fill\", \"grey\")\n    //   .attr(\"cx\", node => node.x)\n    //   .attr(\"cy\", node => node.y + 100)\n  \n    //   svg\n    //   .selectAll(\".link\")\n    //   .data(linkData)\n    //   .join(\"path\").attr(\"class\",\"link\")\n    //   .attr(\"fill\", \"none\")\n    //   .attr(\"stroke\", \"grey\")\n    //   .attr(\"d\", linkGenerator)\n    //   .attr(\"x1\", link => link.source.x)\n    //   .attr(\"y1\", link => link.source.y)\n    //   .attr(\"x2\", link => link.target.x)\n    //   .attr(\"y2\", link => link.target.y)\n  \n    //   svg\n    //   .selectAll(\".label\")\n    //   .data(root.descendants())\n    //   .join(\"text\")\n    //   .attr(\"class\", \"label\")\n    //   .attr(\"fill\", \"black\")\n    //   .text(node => node.data.language)\n    //   .attr(\"font-size\", 16)\n    //   .attr(\"text-anchor\", \"middle\")\n    //   .attr(\"x\", node => node.x)\n    //   .attr(\"y\", node => node.y + 85)\n  \n    // })\n\n    // svg.on(\"mousemove\", ()=> {\n    //   const [x,y] = mouse(svgRef.current)\n    //   simulation\n    //   .force(\"x\", forceX(x).strength(node => 0.2 + node.depth * 0.15))\n    //   .force(\"y\", forceY(y).strength(node => 0.2 + node.depth * 0.15))\n    // })\n\n    // svg.on(\"click\", () => {\n    //    const [x, y] = mouse(svgRef.current)\n    //    simulation\n    //    .alpha(0.5)\n    //    .restart()\n    //    .force(\"orbit\", forceRadial(100, x, y))\n\n    //    svg.selectAll(\".orbit\")\n    //    .data([json])\n    //    .join(\"circle\")\n    //    .attr(\"class\", \"orbit\")\n    //    .attr(\"fill\", \"none\")\n    //    .attr(\"r\", 500)\n    //    .attr(\"cx\", x)\n    //    .attr(\"cy\", y)\n    // })\n\t}, [json, dimensions])\n\nreturn (\n\t<React.Fragment>\n    <div ref={wrapperRef}>\n      \t<svg ref={svgRef} height=\"100vh\"></svg>\n    </div>\n\t\t<br/>\n\t</React.Fragment>\n )\n\n}\n\nexport default Page\n"]},"metadata":{},"sourceType":"module"}