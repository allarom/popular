{"ast":null,"code":"var _jsxFileName = \"/Users/ar/projects/popular/components/ForceLayout.jsx\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState, useRef } from 'react';\nimport dynamic from 'next/dynamic';\nimport { select, hierarchy, tree, linkVertical, forceSimulation } from \"d3\";\nimport json from './lang';\n\nconst Page = props => {\n  const svgRef = useRef();\n  useEffect(() => {\n    const svg = select(svgRef.current);\n    const root = hierarchy(json);\n    const nodeData = root.descendants();\n    const linkData = root.links();\n    const simulation = forceSimulation(nodeData) // force\n    .alphaTarget(0.2).alphaMin(0.5).on(\"tick\", () => {\n      console.log(\"current force\", simulation.alpha());\n      const linkGenerator = linkVertical().x(node => node.x).y(node => node.y + 100);\n      svg.selectAll(\".node\").data(root.descendants()).join(\"circle\").attr(\"class\", \"node\").attr(\"r\", 5).attr(\"fill\", \"grey\").attr(\"cx\", node => node.x).attr(\"cy\", node => node.y + 100);\n      svg.selectAll(\".link\").data(root.links()).join(\"path\").attr(\"class\", \"link\").attr(\"fill\", \"none\").attr(\"stroke\", \"grey\").attr(\"d\", linkGenerator);\n      svg.selectAll(\".label\").data(root.descendants()).join(\"text\").attr(\"class\", \"label\").attr(\"fill\", \"black\").text(node => node.data.language).attr(\"font-size\", 16).attr(\"text-anchor\", \"middle\").attr(\"x\", node => node.x).attr(\"y\", node => node.y + 85);\n    });\n  }, []);\n  return __jsx(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, __jsx(\"svg\", {\n    ref: svgRef,\n    width: \"2000px\",\n    height: \"2000px\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }), __jsx(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }), __jsx(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, \"Forced Layout\"));\n};\n\nexport default Page;","map":{"version":3,"sources":["/Users/ar/projects/popular/components/ForceLayout.jsx"],"names":["React","useEffect","useState","useRef","dynamic","select","hierarchy","tree","linkVertical","forceSimulation","json","Page","props","svgRef","svg","current","root","nodeData","descendants","linkData","links","simulation","alphaTarget","alphaMin","on","console","log","alpha","linkGenerator","x","node","y","selectAll","data","join","attr","text","language"],"mappings":"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","sourcesContent":["import React, {useEffect, useState, useRef} from 'react'\nimport dynamic from 'next/dynamic'\nimport { select, hierarchy, tree, linkVertical, forceSimulation } from \"d3\"\nimport json from './lang'\n\nconst Page = (props) => {\n\tconst svgRef = useRef()\n\tuseEffect(() => {\n\t\tconst svg = select(svgRef.current)\n\t\tconst root = hierarchy(json)\n    const nodeData = root.descendants()\n    const linkData = root.links()\n\n    const simulation = forceSimulation(nodeData)\n    // force\n    .alphaTarget(0.2)\n    .alphaMin(0.5)\n    .on(\"tick\", () => {\n      console.log(\"current force\", simulation.alpha())\n      const linkGenerator = linkVertical()\n      .x(node => node.x)\n      .y(node => node.y + 100)\n  \n      svg\n      .selectAll(\".node\")\n      .data(root.descendants())\n      .join(\"circle\")\n      .attr(\"class\", \"node\")\n      .attr(\"r\", 5)\n      .attr(\"fill\", \"grey\")\n      .attr(\"cx\", node => node.x)\n      .attr(\"cy\", node => node.y + 100)\n  \n      svg\n      .selectAll(\".link\").data(root.links())\n      .join(\"path\").attr(\"class\",\"link\")\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", \"grey\")\n      .attr(\"d\", linkGenerator)\n  \n      svg\n      .selectAll(\".label\")\n      .data(root.descendants())\n      .join(\"text\")\n      .attr(\"class\", \"label\")\n      .attr(\"fill\", \"black\")\n      .text(node => node.data.language)\n      .attr(\"font-size\", 16)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"x\", node => node.x)\n      .attr(\"y\", node => node.y + 85)\n  \n    })\n\t}, [])\n\nreturn (\n\t<React.Fragment>\n\t\t<svg ref={svgRef}  width='2000px' height='2000px'></svg>\n\t\t<br/>\n    <h1>Forced Layout</h1>\n\t</React.Fragment>\n )\n\n}\n\nexport default Page\n"]},"metadata":{},"sourceType":"module"}